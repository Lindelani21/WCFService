@model IEnumerable<Application>

@{
    ViewData["Title"] = "Applications Review Page";
    Application Selected = null;
}

<div class="">
    <div class="row">
        <!--This will contain the whole side bar-->
        <div class="col-4 gap-2">
            @{
                string[] statuses = {"Pending", "Processing", "Processsed"};

                foreach (string status in statuses)
                {
                    <div>
                        <button type="button" class="btn bg-notice-me dropdown-toggle" data-bs-toggle="collapse" data-bs-target="@($"#{status}Application")" aria-controls="@($"{status}Application")">
                            @status
                        </button>

                        <div class="collapse" id="@($"{status}Application")">

                            @{
                                int Applications = 0;
                            }

                            @foreach (var application in Model)
                            {
                                if (application.Status == null || application.Status.ToLower() != status.ToLower())
                                    continue;

                                var applicant = RESTfulClient.Instance.GET<User>($"Users/{application.Id}");
                                string info = $"{applicant.Surname} {applicant.Name}\t";

                                Applications++;

                                <button class="btn btn-outline-secondary" id="@($"Application{application.ApplicationId}")">
                                    @info <strong class="alert-dark">@application.Module</strong>
                                </button>
                            }

                            @if(Applications == 0)
                            {
                                <span class="">
                                    There Are No @status Applications.
                                </span>
                            }

                        </div>
                    </div>
                }
            }
        </div>

        <!-- This will have the detailed application -->
        <div class="col-8">
            @{
                if(Selected != null)
                {

                }
            }
        </div>
    </div>
</div>